# Windows下使用SSH连接远程服务器

<p align='right'><b>--neozng1@hnu.edu.cn</b></p>

## 1.安装OpenSSH服务

Windows10及其以上版本都原生支持了SSH的安装，打开设置，在应用和功能中选择**可选功能**一项：

![image-20220421155224953](typora-user-images\image-20220421155224953.png)

随后添加我们需要的功能：

![image-20220421155313084](typora-user-images\image-20220421155313084.png)

因为我们要连接到服务器端，本机作为客户端，所以在里面搜索**OpenSSH客户端**（如果希望本机作为服务器，则安装OpenSSH服务器端应用），选中并安装：

![image-20220421155407923](typora-user-images\image-20220421155407923.png)

安装好之后，还需要启动OpenSSH的服务。打开任务管理器（ctrl+alt+delete或右键任务栏打开），选择**服务**选项卡，点击**打开服务**：

![image-20220421155638148](typora-user-images\image-20220421155638148.png)

随后找到OpenSSH Authenticaion Agent这一项，右键，点击启动。若**启动**是灰色的，则点击进入**属性**，将启动类型改为**自动**：

![image-20220421160046466](typora-user-images\image-20220421160046466.png)

随后验证安装，打开一个命令提示符（win+R，输入cmd后回车），在cmd中输入`ssh`后回车，若出现如下界面则表示安装成功：

![image-20220421160440965](typora-user-images\image-20220421160440965.png)

若安装的是**服务器端**（客户端无须此步骤），最后还需要启动SSH服务，**以管理员权限启动CMD**：

![image-20220421160905119](typora-user-images\image-20220421160905119.png)

输入`net start sshd`后回车，若显示：

![image-20220421161523496](typora-user-images\image-20220421161523496.png)

说明启动成功。

## 2.生成密钥对

打开一个cmd，输入`ssh-keygen`然后回车：

![image-20220421161634875](typora-user-images\image-20220421161634875.png)

会出现上图所示的命令，询问你将密钥存储在什么地方，小白直接按回车即可。

![image-20220421161744556](typora-user-images\image-20220421161744556.png)

然后出现上图所示的提示，让你输入保护访问密码，若创建后之后每次建立SSH连接都需要输入解锁密钥的密码。为了方便起见，直接回车：

![image-20220421161949205](typora-user-images\image-20220421161949205.png)

然后就会生成你的用于ssh连接的公私钥了。如果没有修改，那么它们被保存在默认路径下，去看看：

![image-20220421162057250](typora-user-images\image-20220421162057250.png)

有两个文件，上面的是**私钥**，千万不要告诉别人；下面的是公钥，需要把他加入服务器端的可信列表中。在前一步设置密码的时候，就是对私钥的访问进行加密，防止私钥泄露。不过在自己的电脑上一般比较安全，可以选择不加。

